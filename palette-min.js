(function(g){g.prototype.palette=function(name){if(g.utils.isUndefined(name))return this.props.palette;this.props.palette=g.getPalette(name);this.update();return this};var _findColor=g.prototype._findColor;g.prototype._findColor=function(c){var palette=this.palette();if(palette&&palette[c])color=palette[c];else color=_findColor.apply(this,arguments);return color};g.palettes={};g.getPalette=function(name){return this.palettes[name]};g.setPalette=function(name,swatches){var palette=this.palettes[name]={};swatches=g.utils.map(swatches,g.Color.parse);g.utils.each(swatches,function(swatch,i){palette[i]=swatch;for(var j=0;j<i;j++){var color=g.Color.interpolate(swatches[j],swatch,.5);palette[j+"-"+i]=color}},this);return this}})(Grapher);